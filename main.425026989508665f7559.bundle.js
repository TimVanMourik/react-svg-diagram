(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(module,exports,__webpack_require__){},138:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UPDATE_STICKY=exports.REMOVE_STICKY=exports.ADD_STICKY=exports.REMOVE_LINK=exports.START_LINK=exports.ADD_LINK=exports.UPDATE_PARAMETER=exports.REMOVE_PARAMETER=exports.ADD_PARAMETER_TO_NODE=exports.UPDATE_NODE=exports.REMOVE_NODE=exports.ADD_NODE=exports.CLICK_ITEM=exports.CLEAR_DATABASE=void 0;exports.CLEAR_DATABASE="CLEAR_DATABASE";exports.CLICK_ITEM="CLICK_ITEM";exports.ADD_NODE="ADD_NODE";exports.REMOVE_NODE="REMOVE_NODE";exports.UPDATE_NODE="UPDATE_NODE";exports.ADD_PARAMETER_TO_NODE="ADD_PARAMETER_TO_NODE";exports.REMOVE_PARAMETER="REMOVE_PARAMETER";exports.UPDATE_PARAMETER="UPDATE_PARAMETER";exports.ADD_LINK="ADD_LINK";exports.START_LINK="START_LINK";exports.REMOVE_LINK="REMOVE_LINK";exports.ADD_STICKY="ADD_STICKY";exports.REMOVE_STICKY="REMOVE_STICKY";exports.UPDATE_STICKY="UPDATE_STICKY"},408:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reduxOrm=__webpack_require__(90),_link=_interopRequireDefault(__webpack_require__(884)),_port=_interopRequireDefault(__webpack_require__(885)),_sticky=_interopRequireDefault(__webpack_require__(886)),_node=_interopRequireDefault(__webpack_require__(887)),orm=new _reduxOrm.ORM({stateSelector:function stateSelector(state){return state}});orm.register(_link.default,_port.default,_node.default,_sticky.default);var _default=orm;exports.default=_default},422:function(module,exports,__webpack_require__){__webpack_require__(423),__webpack_require__(535),module.exports=__webpack_require__(536)},444:function(module,exports){},536:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(310),_theming=__webpack_require__(700);(0,_react.addParameters)({options:{theme:(0,_theming.create)({base:"light",brandTitle:"React SVG Diagram",brandUrl:"https://github.com/TimVanMourik/react-svg-diagram"}),panelPosition:"right",isToolshown:!1}}),(0,_react.configure)((function(){return __webpack_require__(718)}),module)}).call(this,__webpack_require__(83)(module))},718:function(module,exports,__webpack_require__){"use strict";(function(module){var _interopRequireDefault=__webpack_require__(18),_react=_interopRequireDefault(__webpack_require__(0)),_react2=__webpack_require__(310),_addonKnobs=__webpack_require__(719),_Welcome=_interopRequireDefault(__webpack_require__(729)),_MethodsStory=_interopRequireDefault(__webpack_require__(732));(0,_react2.storiesOf)("React SVG Diagram",module).addDecorator(_addonKnobs.withKnobs).add("README",(function(){return _react.default.createElement(_Welcome.default,null)})).add("Methods",(function(){return _react.default.createElement(_MethodsStory.default,null)}))}).call(this,__webpack_require__(83)(module))},729:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Welcome;var _react=_interopRequireDefault(__webpack_require__(0)),_remarkable=__webpack_require__(730),_README=_interopRequireDefault(__webpack_require__(731)),md=new _remarkable.Remarkable({html:!1,xhtmlOut:!0,breaks:!1,linkify:!0}),html=_README.default;function Welcome(){return _react.default.createElement("div",{style:{background:"#fff",padding:"1rem 2rem"},className:"markdown-body"},_react.default.createElement("div",{dangerouslySetInnerHTML:{__html:html}}))}html=html.replace(/<!-- BEGIN_SECTION_SKIPPED_ONLINE -->[\w\W]*<!-- END_SECTION_SKIPPED_ONLINE -->/g,""),html=(html=(html=md.render(html)).replace(/\.\//g,"https://github.com/TimVanMourik/react-svg-diagram/tree/master/")).replace(/<a/g,'<a target="_blank" '),Welcome.__docgenInfo={description:"",methods:[],displayName:"Welcome"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["storybook/stories/Welcome.jsx"]={name:"Welcome",docgenInfo:Welcome.__docgenInfo,path:"storybook/stories/Welcome.jsx"})},731:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='# react-svg-diagram\n**react-svg-diagram** is a React component that allows you to build **diagrams** in SVG format on top of a canvas in with **pan** and **zoom** features. \n\n[![TimVanMourik](https://img.shields.io/badge/website-TimVanMourik-orange.svg)](https://www.TimVanMourik.com)\n[![Code](https://img.shields.io/badge/sources-GitHub-c9510c.svg)](https://github.com/TimVanMourik/react-svg-diagram)\n[![npm](https://img.shields.io/npm/v/react-svg-diagram.svg?maxAge=2592000?style=plastic)](https://www.npmjs.com/package/react-svg-diagram)\n[![Downloads](https://img.shields.io/npm/dm/react-svg-diagram.svg)](https://www.npmjs.com/package/react-svg-diagram)\n\n\x3c!-- BEGIN_SECTION_SKIPPED_ONLINE --\x3e\n[![react-svg-diagram](https://raw.githubusercontent.com/TimVanMourik/react-svg-diagram/master/react-svg-diagram.gif)](http://TimVanMourik.github.io/react-svg-diagram)\n\n## Live Demo\navailable at [http://TimVanMourik.github.io/react-svg-diagram/](http://TimVanMourik.github.io/react-svg-diagram)\n\x3c!-- END_SECTION_SKIPPED_ONLINE --\x3e\n\n## Features\nThis component can work in four different modes depending on the selected tool:\n- With the tool **pan** the user can move the image and drag it around within the viewer, but can\'t interact with SVG child elements.\n- With the tool **zoom** the user can scale the image either with a point click or selecting a region to zoom the specified area, but can\'t interact with SVG child elements.\n- With the tool **none** the user can interact with SVG child elements and trigger events.\n- With the tool **auto** the user can interact with SVG child elements, perform *pan* (dragging the image), *zoom in* (double click), *zoom out* (double click + shift).\n\n## Documentation\n- [Getting Started](./docs/getting-started.md#props)\n- [Props](./docs/documentation.md#props)\n- [Methods](./docs/documentation.md#methods)\n- [API](./docs/documentation.md#api)\n- [Autosizer viewer](./docs/autosizer-viewer.md)\n- [SVG dynamically loaded](./docs/svg-dynamically-loaded.md)\n\n\x3c!-- BEGIN_SECTION_SKIPPED_ONLINE --\x3e\n## Install\n### NPM\n```sh\nnpm install --save react-svg-diagram\n```\n### YARN\n```sh\nyarn add react-svg-diagram\n```\n### UMD\n```html\n<script src="https://unpkg.com/prop-types@15/prop-types.js"><\/script>\n<script src="https://unpkg.com/react-svg-diagram@0"><\/script>\n```\n\x3c!-- END_SECTION_SKIPPED_ONLINE --\x3e\n\n## Usage examples\n- [**Basic**](./examples/controlled-component) - Basic usage of `<ReactSVGPanZoom>`.\n- [**Uncontrolled Component**](./examples/uncontrolled-component) - Basic usage of `<UncontrolledReactSVGPanZoom>`.\n- [**Advanced usage**](./examples/controlled-component-advanced-usage) - Complex usage of `<ReactSVGPanZoom>` that uses some advanced features.\n- [**JSFiddle**](https://jsfiddle.net/TimVanMourik/) - This is a JSFiddle demo that uses UMD bundle.\n- [**CodeSandbox**](https://codesandbox.io/s/1v19809803) - This is a CodeSandbox demo.\n\n## Changelog\n- **v0.1** - \n- **v0.0** - \n\n## Some projects using react-svg-diagram\n- [**GiraffeTools**](https://giraffe.tools)\n- Pull request your project!\n\n## Contributors\n- [TimVanMourik](https://github.com/TimVanMourik) (author)'},732:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(101),_interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(139)),_react=_interopRequireWildcard(__webpack_require__(0)),_loremIpsum=__webpack_require__(733),_uuid=__webpack_require__(102),_index=__webpack_require__(747),_constants=__webpack_require__(911),_actionTypes=__webpack_require__(138),STYLE_BUTTON={fontFamily:"courier",margin:"0rem 0.2rem 0.2rem",padding:"0.1rem",border:"1px solid black",background:"#000",color:"#0f0",cursor:"pointer"},HR_BUTTON={borderTop:"0px",borderBottom:"1px solid #333"},lorem=new _loremIpsum.LoremIpsum({sentencesPerParagraph:{max:8,min:4},wordsPerSentence:{max:16,min:4}});function getRandomColor(){for(var color="#",i=0;i<6;i++)color+="0123456789ABCDEF"[Math.floor(16*Math.random())];return color}var randomPortPayload=function randomPortPayload(nodeId){return{id:(0,_uuid.v4)(),node:nodeId,input:Math.random()>=.5,output:Math.random()>=.5,name:lorem.generateWords(1)}},randomPortsPayload=function randomPortsPayload(numberOfPorts,nodeId){for(var ports=[],i=0;i<numberOfPorts;++i)ports.push(randomPortPayload(nodeId));return ports},randomNodePayload=function randomNodePayload(){var numberOfPorts=Math.floor(8*Math.random())+1,id=(0,_uuid.v4)();return{id:id,name:lorem.generateWords(1),x:Math.floor(800*Math.random()),y:Math.floor(800*Math.random()),colour:getRandomColor(),ports:randomPortsPayload(numberOfPorts,id)}},randomStickyPayload=function randomStickyPayload(){return{id:(0,_uuid.v4)(),name:lorem.generateWords(1),content:lorem.generateSentences(2),x:Math.floor(600*Math.random()),y:Math.floor(600*Math.random())}},MethodsStory=function MethodsStory(){var _useReducer=(0,_react.useReducer)(_index.LayoutReducer),_useReducer2=(0,_slicedToArray2.default)(_useReducer,2),layoutState=_useReducer2[0],dispatch=_useReducer2[1],viewerRef=(0,_react.useRef)(null);return _react.default.createElement(_react.StrictMode,null,_react.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},_react.default.createElement("div",null,_react.default.createElement("button",{type:"button",style:STYLE_BUTTON,name:"fit-btn",onClick:function onClick(event){return viewerRef.saveToFile(_constants.FORMAT_SVG)}},".saveToSvg(FORMAT_SVG)"),_react.default.createElement("button",{type:"button",style:STYLE_BUTTON,name:"fit-btn",onClick:function onClick(event){return viewerRef.saveToFile(_constants.FORMAT_PNG)}},".saveToSvg(FORMAT_PNG)")),_react.default.createElement("hr",{style:HR_BUTTON}),_react.default.createElement("div",null,_react.default.createElement("button",{type:"button",style:STYLE_BUTTON,name:"fit-btn",onClick:function onClick(event){return dispatch({type:_actionTypes.CLEAR_DATABASE})}},"CLEAR_DATABASE"),_react.default.createElement("button",{type:"button",style:STYLE_BUTTON,name:"fit-btn",onClick:function onClick(event){return dispatch({type:_actionTypes.ADD_NODE,payload:randomNodePayload()})}},"ADD_NODE (random payload)"),_react.default.createElement("button",{type:"button",style:STYLE_BUTTON,name:"fit-btn",onClick:function onClick(event){return dispatch({type:_actionTypes.ADD_STICKY,payload:randomStickyPayload()})}},"ADD_STICKY (random payload)")),_react.default.createElement("hr",{style:HR_BUTTON}),_react.default.createElement(_index.ReactSVGDiagram,{x:0,y:0,width:300,height:300,layout:layoutState,ref:viewerRef},">")))};MethodsStory.__docgenInfo={description:"",methods:[],displayName:"MethodsStory"};var _default=MethodsStory;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["storybook/stories/MethodsStory.jsx"]={name:"MethodsStory",docgenInfo:MethodsStory.__docgenInfo,path:"storybook/stories/MethodsStory.jsx"})},747:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ReactSVGDiagram",{enumerable:!0,get:function get(){return _viewer.default}}),Object.defineProperty(exports,"LayoutReducer",{enumerable:!0,get:function get(){return _reducers.default}});var _viewer=_interopRequireDefault(__webpack_require__(748)),_reducers=_interopRequireDefault(__webpack_require__(910))},748:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18),_interopRequireWildcard=__webpack_require__(101);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0)),_reactSvgPanZoom=__webpack_require__(913),_reactVirtualized=__webpack_require__(912),_background=__webpack_require__(845),_items=_interopRequireDefault(__webpack_require__(846)),_saveToImage=__webpack_require__(889),_default=(0,_react.forwardRef)((function(_ref,Viewer){_ref.background,_ref.defs;var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,layout=_ref.layout,svgRef=(0,_react.useRef)(null),viewerRef=(0,_react.useRef)(null);(0,_react.useImperativeHandle)(Viewer,(function(){return{saveToFile:function saveToFile(format){(0,_saveToImage.svgElementToFile)(viewerRef,format)}}}));var viewer=_react.default.createElement("svg",{viewBox:"".concat(x||0," ").concat(y||0," ").concat(width," ").concat(height)},_react.default.createElement("defs",null,_react.default.createElement(_background.BackgroundDefs,null)),_react.default.createElement("g",{className:"view",ref:svgRef},_react.default.createElement(_background.Background,null),_react.default.createElement("g",{className:"entities"},_react.default.createElement(_items.default,{layout:layout}))));return _react.default.createElement("div",{style:{width:"100%",height:"100%"}},_react.default.createElement(_reactVirtualized.AutoSizer,null,(function(_ref2){var width=_ref2.width,height=_ref2.height;return 0===width||0===height?null:_react.default.createElement(_reactSvgPanZoom.UncontrolledReactSVGPanZoom,{ref:viewerRef,width:width,height:height,background:"#fff",miniatureProps:{position:_reactSvgPanZoom.POSITION_RIGHT},toolbarProps:{position:_reactSvgPanZoom.POSITION_RIGHT,SVGAlignY:_reactSvgPanZoom.ALIGN_CENTER,SVGAlignX:_reactSvgPanZoom.ALIGN_CENTER}},viewer)})))}));exports.default=_default},845:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundDefs=exports.Background=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),defaults_gridSpacing=36,defaults_gridDot=2,defaults_gridSize=40960,Background=function Background(){return _react.default.createElement("rect",{className:"background",x:-defaults_gridSize/2,y:-defaults_gridSize/2,width:defaults_gridSize,height:defaults_gridSize,fill:"url(#grid)"})};exports.Background=Background;var BackgroundDefs=function BackgroundDefs(){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("pattern",{id:"grid",key:"grid",width:defaults_gridSpacing,height:defaults_gridSpacing,patternUnits:"userSpaceOnUse"},_react.default.createElement("circle",{cx:defaults_gridSpacing/2,cy:defaults_gridSpacing/2,r:defaults_gridDot,fill:"lightgray"})),_react.default.createElement("filter",{id:"selection-glow"},_react.default.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 0 0.7 0"}),_react.default.createElement("feGaussianBlur",{stdDeviation:"5",result:"coloredBlur"}),_react.default.createElement("feMerge",null,_react.default.createElement("feMergeNode",{in:"coloredBlur"}),_react.default.createElement("feMergeNode",{in:"SourceGraphic"}))),_react.default.createElement("linearGradient",{id:"linearGradient4752"},_react.default.createElement("stop",{id:"stop4754",offset:"0",stopColor:"#fed661",stopOpacity:1}),_react.default.createElement("stop",{id:"stop4756",offset:"1",stopColor:"#edc63d",stopOpacity:1})),_react.default.createElement("linearGradient",{id:"linearGradient4701"},_react.default.createElement("stop",{stopColor:"#fed661",stopOpacity:1,offset:"0",id:"stop4703"}),_react.default.createElement("stop",{stopColor:"#fed12f",stopOpacity:1,offset:"1",id:"stop4705"})),_react.default.createElement("linearGradient",{xlinkHref:"#linearGradient4701",id:"linearGradient4763",gradientUnits:"userSpaceOnUse",x1:"318.57144",y1:"42.17857",x2:"294.28571",y2:"437.89285"}),_react.default.createElement("linearGradient",{xlinkHref:"#linearGradient4752",id:"linearGradient4765",gradientUnits:"userSpaceOnUse",x1:"187.14285",y1:"465.03571",x2:"151.27034",y2:"308.62051"}),_react.default.createElement("linearGradient",{xlinkHref:"#linearGradient4701",id:"linearGradient4767",gradientUnits:"userSpaceOnUse",x1:"344.97217",y1:"418.97968",x2:"515.17273",y2:"418.97968"}))};exports.BackgroundDefs=BackgroundDefs,Background.__docgenInfo={description:"",methods:[],displayName:"Background"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/background.jsx"]={name:"Background",docgenInfo:Background.__docgenInfo,path:"src/components/background.jsx"}),BackgroundDefs.__docgenInfo={description:"",methods:[],displayName:"BackgroundDefs"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/background.jsx"]={name:"BackgroundDefs",docgenInfo:BackgroundDefs.__docgenInfo,path:"src/components/background.jsx"})},846:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_node=_interopRequireDefault(__webpack_require__(847)),_link=_interopRequireDefault(__webpack_require__(852)),_sticky=_interopRequireDefault(__webpack_require__(853)),_selectors=__webpack_require__(856),Items=function Items(_ref){var layout=_ref.layout;if(!layout)return null;var nodes=(0,_selectors.selectNodesWithPorts)(layout),nodesToRender=nodes&&nodes.map((function(node){return _react.default.createElement(_node.default,Object.assign({},node,{key:node.id}))})),links=(0,_selectors.selectLinks)(layout),linksToRender=links&&links.map((function(link){return _react.default.createElement(_link.default,Object.assign({},link,{key:link.id}))})),stickies=(0,_selectors.selectStickies)(layout),stickiesToRender=stickies&&stickies.map((function(sticky){return _react.default.createElement(_sticky.default,Object.assign({},sticky,{key:sticky.id}))}));return _react.default.createElement(_react.default.Fragment,null,stickiesToRender,nodesToRender,linksToRender)};Items.__docgenInfo={description:"",methods:[],displayName:"Items"};var _default=Items;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/items.jsx"]={name:"Items",docgenInfo:Items.__docgenInfo,path:"src/components/items.jsx"})},847:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(101),_interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(139)),_react=_interopRequireWildcard(__webpack_require__(0)),_parameter=_interopRequireDefault(__webpack_require__(848));_interopRequireDefault(__webpack_require__(850));__webpack_require__(137);var Node=function Node(props){var id=props.id,name=props.name,x=props.x,y=props.y,width=props.width,colour=props.colour,scale=props.scale,ports=props.ports,updateNode=props.updateNode,clickItem=props.clickItem,_useState=(0,_react.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2),dragging=_useState2[0],setDragging=_useState2[1],_useState3=(0,_react.useState)(!1),_useState4=(0,_slicedToArray2.default)(_useState3,2),hovered=_useState4[0],setHover=_useState4[1],_useState5=(0,_react.useState)(x),_useState6=(0,_slicedToArray2.default)(_useState5,2),xDragging=_useState6[0],setDraggingX=_useState6[1],_useState7=(0,_react.useState)(y),_useState8=(0,_slicedToArray2.default)(_useState7,2),yDragging=_useState8[0],setDraggingY=_useState8[1],endDrag=function endDrag(){setDragging(!1),updateNode&&updateNode(id,{x:xDragging,y:yDragging})},portBlock=0===ports.length?null:ports.map((function(port,index){return _react.default.createElement(_parameter.default,Object.assign({},port,{key:port.id,width:width,y:50+25*index}))}));return _react.default.createElement("g",{transform:"translate(".concat(x,",").concat(y,")"),onClick:function onClick(){return clickItem(id,"node")},onMouseEnter:function onMouseEnter(){return setHover(!0)},onMouseLeave:function onMouseLeave(){setHover(!1),endDrag()},onMouseDown:function onMouseDown(){return function startDrag(){setDragging(!0),setDraggingX(x),setDraggingY(y)}()},onMouseUp:function onMouseUp(){return endDrag()},onMouseMove:function onMouseMove(event){return dragging&&function drag(event){setDraggingX(xDragging+event.movementX/(scale||1)),setDraggingY(yDragging+event.movementY/(scale||1)),updateNode&&updateNode(id,{x:xDragging,y:yDragging})}(event)}},_react.default.createElement("rect",{fill:colour,rx:6,ry:6,width:"".concat(width,"px"),height:50+25*(ports&&ports.length),filter:hovered?"url(#selection-glow)":""}),_react.default.createElement("text",{className:"noselect",fill:"white",textAnchor:"middle",x:width/2,y:28,fontSize:"1.4rem"},name),portBlock)};Node.__docgenInfo={description:"",methods:[],displayName:"Node"};var _default=Node;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/node.jsx"]={name:"Node",docgenInfo:Node.__docgenInfo,path:"src/components/node.jsx"})},848:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_port=_interopRequireDefault(__webpack_require__(849));__webpack_require__(137);var Parameter=function Parameter(_ref){var name=_ref.name,input=_ref.input,output=_ref.output,_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,y=_ref.y,width=_ref.width;_ref.id;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("text",{className:"noselect",fill:"white",textAnchor:"middle",x:x+width/2,y:y},name),input&&_react.default.createElement(_port.default,{id:input,type:"input",x:x,y:y-4}),output&&_react.default.createElement(_port.default,{id:output,type:"output",x:x+width,y:y-4}))};Parameter.__docgenInfo={description:"",methods:[],displayName:"Parameter"};var _default=Parameter;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/parameter.jsx"]={name:"Parameter",docgenInfo:Parameter.__docgenInfo,path:"src/components/parameter.jsx"})},849:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(101),_interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(139)),_react=_interopRequireWildcard(__webpack_require__(0)),_uuid=__webpack_require__(102),Port=function Port(props){var _useState=(0,_react.useState)(null),_useState2=(0,_slicedToArray2.default)(_useState,2),linkUnderConstruction=_useState2[0],setLinkUnderConstruction=_useState2[1],hoverPort=props.hoverPort,addLink=props.addLink,hoveredPort=props.hoveredPort,id=props.id,type=props.type,startLink=props.startLink,x=props.x,y=props.y,_useState3=(0,_react.useState)(!1),_useState4=(0,_slicedToArray2.default)(_useState3,2),dragging=_useState4[0],setDragging=_useState4[1],_useState5=(0,_react.useState)({x:x,y:y}),_useState6=(0,_slicedToArray2.default)(_useState5,2),draggingPosition=_useState6[0],setDraggingPosition=_useState6[1],d="M";return linkUnderConstruction&&(d+="".concat(x," ").concat(y),d+=" C",d+=" ".concat(1*x/4+3*linkUnderConstruction.x/4," ").concat(y),d+=" ".concat(3*x/4+1*linkUnderConstruction.x/4," ").concat(linkUnderConstruction.y+5),d+=" ".concat(linkUnderConstruction.x," ").concat(linkUnderConstruction.y+5)),_react.default.createElement("g",{onMouseEnter:function onMouseEnter(){hoverPort&&hoverPort(id,type)},onMouseLeave:function onMouseLeave(){hoverPort&&hoverPort(null)},onMouseDown:function onMouseDown(){return function startDrag(){setDragging(!0),setDraggingPosition({x:x,y:y})}()},onMouseUp:function onMouseUp(){return function endDrag(){setDragging(!1),hoveredPort&&hoveredPort.type!==type&&addLink({id:(0,_uuid.v4)(),portFrom:"output"===type?id:hoveredPort.id,portTo:"input"===type?id:hoveredPort.id}),setLinkUnderConstruction(null)}()},onMouseMove:function onMouseMove(event){return dragging&&function drag(event){startLink(id),setDraggingPosition({x:draggingPosition.x+event.movementX,y:draggingPosition.y+event.movementY}),setLinkUnderConstruction(draggingPosition)}(event)}},_react.default.createElement("circle",{cx:x,cy:y,r:4,fill:"input"===type?"#3498db":"#e74c3c",cursor:"pointer",strokeWidth:"20",stroke:"transparent"}),linkUnderConstruction&&_react.default.createElement("path",{d:d,stroke:"black",strokeWidth:"2",fill:"none",r:10}))};Port.__docgenInfo={description:"",methods:[],displayName:"Port"};var _default=Port;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/port.jsx"]={name:"Port",docgenInfo:Port.__docgenInfo,path:"src/components/port.jsx"})},850:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_tooltipData=_interopRequireDefault(__webpack_require__(851));__webpack_require__(137);var Tooltip=function Tooltip(_ref){var parameterBlock,parameters=_ref.parameters,parametersWithValues=parameters&&parameters.filter((function(parameter){return""!==parameter.value}));return parameterBlock=0===parametersWithValues.length?_react.default.createElement("text",{fill:"white",y:14,x:8,className:"noselect"},"No parameters set"):parametersWithValues.map((function(parameter,index){return _react.default.createElement(_tooltipData.default,{id:parameter.name,key:parameter.name,name:parameter.name,type:parameter.type,value:parameter.value,height:28*(index+1)})})),_react.default.createElement("g",{transform:"translate(".concat(0,",",28*-(parametersWithValues.length+1),")")},_react.default.createElement("rect",{fill:"black",opacity:.5,rx:6,ry:6,width:400,height:28*(parametersWithValues.length+.6)}),parameterBlock)};Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip"};var _default=Tooltip;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tooltip.jsx"]={name:"Tooltip",docgenInfo:Tooltip.__docgenInfo,path:"src/components/tooltip.jsx"})},851:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));__webpack_require__(137);var TooltipData=function TooltipData(_ref){var inputElement,name=_ref.name,type=_ref.type,value=_ref.value,height=_ref.height;inputElement="checkbox"===type?value?"True":"False":value;var fieldText="".concat(name,": ").concat(inputElement);return fieldText=fieldText.length<45?fieldText:fieldText.substring(0,45)+"...",_react.default.createElement("text",{fill:"white",y:height,x:8,className:"noselect"},fieldText)};TooltipData.__docgenInfo={description:"",methods:[],displayName:"TooltipData"};var _default=TooltipData;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tooltipData.jsx"]={name:"TooltipData",docgenInfo:TooltipData.__docgenInfo,path:"src/components/tooltipData.jsx"})},852:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(101),_interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(139)),_react=_interopRequireWildcard(__webpack_require__(0)),Link=function Link(props){var _useState=(0,_react.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2),hovered=_useState2[0],setHover=_useState2[1],clickItem=props.clickItem,id=props.id,portFrom=props.portFrom,portTo=props.portTo,selectedLinks=props.selectedLinks;if(!portFrom||!portTo)return _react.default.createElement("g",null);var startingPoint={x:portFrom.x,y:portFrom.y+5},endPoint={x:portTo.x,y:portTo.y+5},d="M";return d+="".concat(startingPoint.x," ").concat(startingPoint.y),d+=" C",d+=" ".concat(1*startingPoint.x/4+3*endPoint.x/4," ").concat(startingPoint.y),d+=" ".concat(3*startingPoint.x/4+1*endPoint.x/4," ").concat(endPoint.y),d+=" ".concat(endPoint.x," ").concat(endPoint.y),_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("path",{d:d,stroke:"black",strokeWidth:"2",fill:"none",r:10,filter:hovered||selectedLinks&&selectedLinks.includes(id)?"url(#selection-glow)":"",cursor:"pointer"}),_react.default.createElement("path",{onClick:function onClick(){return clickItem(id,"link")},onMouseEnter:function onMouseEnter(){return setHover(!0)},onMouseLeave:function onMouseLeave(){return setHover(!1)},d:d,stroke:"transparent",strokeWidth:"24",fill:"none",r:10,cursor:"pointer"}))};Link.__docgenInfo={description:"",methods:[],displayName:"Link"};var _default=Link;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/link.jsx"]={name:"Link",docgenInfo:Link.__docgenInfo,path:"src/components/link.jsx"})},853:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(101),_interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(139)),_react=_interopRequireWildcard(__webpack_require__(0)),_truncateString=__webpack_require__(854),_wordWrap=__webpack_require__(855);__webpack_require__(137);var Sticky=function Sticky(props){var name=props.name,content=props.content,x=props.x,y=props.y,scale=props.scale,id=props.id,clickItem=props.clickItem,updateSticky=props.updateSticky,_useState=(0,_react.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2),dragging=_useState2[0],setDragging=_useState2[1],_useState3=(0,_react.useState)(!1),_useState4=(0,_slicedToArray2.default)(_useState3,2),hovered=_useState4[0],setHover=_useState4[1],_useState5=(0,_react.useState)({x:x,y:y}),_useState6=(0,_slicedToArray2.default)(_useState5,2),draggingPosition=_useState6[0],setDraggingPosition=_useState6[1],textParameters={x:290,y:120,fontSize:30,lineHeight:1.25,style:"",fontFamily:"NexaBold"},textwrap=(0,_wordWrap.wrap)(content,textParameters,100,8),endDrag=function endDrag(){setDragging(!1),updateSticky&&updateSticky(id,draggingPosition)},_ref=dragging?draggingPosition:props,xPos=_ref.x,yPos=_ref.y;return _react.default.createElement("g",{transform:"translate(".concat(xPos,",").concat(yPos,")"),onClick:function onClick(){clickItem&&clickItem(id,"sticky")},onMouseEnter:function onMouseEnter(){return setHover(!0)},onMouseLeave:function onMouseLeave(){setHover(!1),endDrag()},onMouseDown:function onMouseDown(){return function startDrag(){setDragging(!0),setDraggingPosition({x:x,y:y})}()},onMouseUp:function onMouseUp(){return endDrag()},onMouseMove:function onMouseMove(event){return dragging&&function drag(event){event.stopPropagation(),setDraggingPosition({x:draggingPosition.x+event.movementX/(scale||1),y:draggingPosition.y+event.movementY/(scale||1)})}(event)}},_react.default.createElement("g",{transform:"translate(0,100) scale(0.4,0.4)"},_react.default.createElement("path",{d:"M 71.428571,29.321428 C 71.428571,35.035714 70,309.32143 70,309.32143 L 192.85714,480.75 l 320,10 5.71429,-452.857143 -447.142859,-8.571429 z",fill:"url(#linearGradient4763)",fillOpacity:1,stroke:"none",filter:hovered?"url(#selection-glow)":""}),_react.default.createElement("path",{d:"m 345.47217,485.90229 167.68532,5.05076 1.51523,-143.94674 -169.20055,138.89598 z",fill:"url(#linearGradient4767)",stroke:"none"}),_react.default.createElement("text",{className:"noselect",fill:"#777",fontFamily:"Nexa-Bold",fontSize:"4rem",x:80,y:90},(0,_truncateString.truncateString)(name,10)),_react.default.createElement("text",{className:"noselect",fill:"#777",textAnchor:"middle",fontSize:"1.8rem",x:textParameters[x],y:textParameters[y]},textwrap),_react.default.createElement("path",{d:"M 69.700526,308.62052 192.93914,480.85153 232.84016,361.14845 69.700526,308.62052 z",fill:"url(#linearGradient4765)",fillOpacity:1,stroke:"none"})))};Sticky.__docgenInfo={description:"",methods:[],displayName:"Sticky"};var _default=Sticky;exports.default=_default,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/sticky.jsx"]={name:"Sticky",docgenInfo:Sticky.__docgenInfo,path:"src/components/sticky.jsx"})},854:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncateString=function truncateString(string,maxLength){return string.length>maxLength?string.substring(0,maxLength)+"...":string}},855:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrap=function wrap(text,textParameters,maxWidth,maxLines){var x=textParameters.x,y=textParameters.y,fontSize=textParameters.fontSize,lineHeight=textParameters.lineHeight,words=text.split(" "),lines=[],line=0;lines[line]=[],words.forEach((function(word){getTextWidth(lines[line].join(" "))<=maxWidth?lines[line].push(word):lines[line+=1]=[word]}));var lineElements=lines.map((function(line,index){return _react.default.createElement("tspan",{key:index,x:x,y:y+index*(fontSize+lineHeight)},line.join(" "))}));if(lineElements.length<=maxLines)return lineElements;var truncated=lineElements.slice(0,maxLines);return truncated.push(_react.default.createElement("tspan",{key:maxLines,x:x,y:y+maxLines*(fontSize+lineHeight)},"......")),truncated};var _react=_interopRequireDefault(__webpack_require__(0));function getTextWidth(text,font){var context=(getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return context.font=font,context.measureText(text).width}},856:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.linksWithPortsAndNodes=exports.linksWithPorts=exports.links=exports.selection=exports.selectedSticky=exports.selectedLink=exports.selectedNode=exports.copiedNodes=exports.nodes=exports.selectLinks=exports.selectNodesWithPorts=exports.selectStickies=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(187)),_reduxOrm=__webpack_require__(90),_models=_interopRequireDefault(__webpack_require__(408));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var selectStickies=(0,_reduxOrm.createSelector)(_models.default.Sticky);exports.selectStickies=selectStickies;var selectNodesWithPorts=(0,_reduxOrm.createSelector)(_models.default,(function(session){return session.Node.all().toModelArray().map((function(node){return _objectSpread({},node.ref,{ports:node.ports.toRefArray()})}))}));exports.selectNodesWithPorts=selectNodesWithPorts;var selectLinks=(0,_reduxOrm.createSelector)(_models.default.Link);exports.selectLinks=selectLinks;var nodes=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(session){return session.Node.all().toRefArray()}));exports.nodes=nodes;var copiedNodes=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(state){return state.scene.copyNodes}),(function(orm,copyNodes){if(!copyNodes)return null;var nodes=orm.Node.filter((function(node){return copyNodes.includes(node.id)})).toRefArray();return nodes.length?nodes:null}));exports.copiedNodes=copiedNodes;var selectedNode=function selectedNode(orm,node){if(!node)return null;var parameters=node.parameters&&node.parameters.toModelArray().map((function(parameterRef){var parameter=orm.Parameter.withId(parameterRef.id),inputLinks=parameter.input&&parameter.input.inputLinks?parameter.input.inputLinks.toRefArray():[],outputLinks=parameter.output&&parameter.output.outputLinks?parameter.output.outputLinks.toRefArray():[];return _objectSpread({},parameter.ref,{outputLinks:outputLinks,inputLinks:inputLinks})}));return _objectSpread({},node.ref,{parameters:parameters})};exports.selectedNode=selectedNode;var selectedLink=function selectedLink(orm,link){return null};exports.selectedLink=selectedLink;var selectedSticky=function selectedSticky(orm,sticky){return sticky?_objectSpread({},sticky.ref):null};exports.selectedSticky=selectedSticky;var selection=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(state){return state.scene.selection}),(function(orm,selection){if(!selection)return null;var links=selection.links,nodes=selection.nodes,stickies=selection.stickies;if((nodes&&nodes.length)+(links&&links.length)+(stickies&&stickies.length)===1){if(nodes&&1===nodes.length){var node=orm.Node.withId(nodes[0]);return _objectSpread({type:"node"},selectedNode(orm,node))}if(links&&1===links.length){orm.Link.withId(links[0]);return _objectSpread({type:"link"},null)}if(stickies&&1===stickies.length){var sticky=orm.Sticky.withId(stickies[0]);return _objectSpread({type:"sticky"},selectedSticky(0,sticky))}}return null}));exports.selection=selection;var links=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(session){return session.Link.all().toRefArray()}));exports.links=links;var linksWithPorts=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(session){return session.Link.all().toRefArray().map((function(link){return _objectSpread({},link,{portFrom:link.portFrom?session.Port.withId(link.portFrom).ref:null,portTo:link.portTo?session.Port.withId(link.portTo).ref:null})}))}));exports.linksWithPorts=linksWithPorts;var linksWithPortsAndNodes=(0,_reduxOrm.createSelector)(_models.default,(function(state){return state.orm}),(function(session){return session.Link.all().toRefArray().map((function(link){var outputPort=session.Port.withId(link.portFrom),nodeFrom=session.Node.withId(outputPort.node),portFrom=outputPort?_objectSpread({},outputPort.ref,{name:outputPort.outputParent&&outputPort.outputParent.name,node:_objectSpread({},nodeFrom.ref)}):null,inputPort=session.Port.withId(link.portTo),nodeTo=session.Node.withId(inputPort.node),portTo=inputPort?_objectSpread({},inputPort.ref,{name:inputPort.inputParent&&inputPort.inputParent.name,node:_objectSpread({},nodeTo.ref)}):null;return _objectSpread({},link,{portFrom:portFrom,portTo:portTo})}))}));exports.linksWithPortsAndNodes=linksWithPortsAndNodes},884:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(187)),_classCallCheck2=_interopRequireDefault(__webpack_require__(188)),_createClass2=_interopRequireDefault(__webpack_require__(189)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(191)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(190)),_inherits2=_interopRequireDefault(__webpack_require__(192)),_reduxOrm=__webpack_require__(90),_uuid=__webpack_require__(102),_actionTypes=__webpack_require__(138);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Link=function(_Model){function Link(){return(0,_classCallCheck2.default)(this,Link),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Link).apply(this,arguments))}return(0,_inherits2.default)(Link,_Model),(0,_createClass2.default)(Link,null,[{key:"reducer",value:function reducer(action,Link){var type=action.type,payload=action.payload;switch(type){case _actionTypes.CLEAR_DATABASE:Link.all().delete();break;case _actionTypes.ADD_LINK:if(!(0!==Link.all().filter((function(link){return payload.portFrom===link.portFrom&&payload.portTo===link.portTo})).toRefArray().length))return;Link.create(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({id:payload.id||(0,_uuid.v4)()},payload));break;case _actionTypes.REMOVE_LINK:Link.withId(payload.id).delete();break;case _actionTypes.REMOVE_NODE:Link.all().toModelArray().forEach((function(link){link.portFromModel.outputParent.nodeModel.id===payload.id&&link.delete()})),Link.all().toModelArray().forEach((function(link){link.portToModel.inputParent.nodeModel.id===payload.id&&link.delete()}));break;case _actionTypes.REMOVE_PORT:Link.all().toModelArray().forEach((function(link){link.portFromModel.outputParent.id===payload.id&&link.delete()})),Link.all().toModelArray().forEach((function(link){link.portToModel.inputParent.id===payload.id&&link.delete()}));break;default:return}}}]),Link}(_reduxOrm.Model);Link.modelName="Link",Link.fields={id:(0,_reduxOrm.attr)(),portFrom:(0,_reduxOrm.fk)({to:"Port",as:"portFromModel",relatedName:"outputLinks"}),portTo:(0,_reduxOrm.fk)({to:"Port",as:"portToModel",relatedName:"inputLinks"})};var _default=Link;exports.default=_default},885:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(188)),_createClass2=_interopRequireDefault(__webpack_require__(189)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(191)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(190)),_inherits2=_interopRequireDefault(__webpack_require__(192)),_reduxOrm=__webpack_require__(90),_uuid=__webpack_require__(102),_actionTypes=__webpack_require__(138),Port=function(_Model){function Port(){return(0,_classCallCheck2.default)(this,Port),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Port).apply(this,arguments))}return(0,_inherits2.default)(Port,_Model),(0,_createClass2.default)(Port,null,[{key:"reducer",value:function reducer(action,Port){var type=action.type,payload=action.payload;switch(type){case _actionTypes.CLEAR_DATABASE:Port.all().delete();break;case _actionTypes.ADD_NODE:var ports=payload.ports;ports&&ports.forEach((function(port){Port.create({id:port.id||(0,_uuid.v4)(),node:payload.id,name:port.name,input:port.input,output:port.output})}));break;case _actionTypes.REMOVE_NODE:Port.filter((function(port){return port.node===payload.id})).toModelArray().forEach((function(port){port.input&&port.inputModel.delete(),port.output&&port.outputModel.delete(),port.delete()}));break;case _actionTypes.ADD_PORT_TO_NODE:var port=payload.port,nodeId=payload.nodeId;Port.filter({id:port.id}).exists()||Port.create({id:port.id,node:nodeId,name:port.name,type:port.type,input:port.input,output:port.output});break;case _actionTypes.REMOVE_PORT:Port.withId(payload.id).delete();break;case _actionTypes.UPDATE_PORT:Port.withId(payload.portId).update(payload.newValues);break;default:return}}}]),Port}(_reduxOrm.Model);Port.modelName="Port",Port.fields={name:(0,_reduxOrm.attr)(),node:(0,_reduxOrm.fk)({to:"Node",as:"node",relatedName:"ports"}),input:(0,_reduxOrm.attr)(),output:(0,_reduxOrm.attr)()};var _default=Port;exports.default=_default},886:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(187)),_classCallCheck2=_interopRequireDefault(__webpack_require__(188)),_createClass2=_interopRequireDefault(__webpack_require__(189)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(191)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(190)),_inherits2=_interopRequireDefault(__webpack_require__(192)),_reduxOrm=__webpack_require__(90),_uuid=__webpack_require__(102),_actionTypes=__webpack_require__(138);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Sticky=function(_Model){function Sticky(){return(0,_classCallCheck2.default)(this,Sticky),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Sticky).apply(this,arguments))}return(0,_inherits2.default)(Sticky,_Model),(0,_createClass2.default)(Sticky,null,[{key:"reducer",value:function reducer(action,Sticky,session){var type=action.type,payload=action.payload;switch(type){case _actionTypes.CLEAR_DATABASE:Sticky.all().delete();break;case _actionTypes.ADD_STICKY:Sticky.create({id:payload.id||(0,_uuid.v4)(),name:payload.name||"",content:payload.content||"",x:payload.x||0,y:payload.y||0});break;case _actionTypes.UPDATE_STICKY:var newValues=payload.newValues;Sticky.withId(payload.id).update(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},newValues));break;case _actionTypes.REMOVE_STICKY:Sticky.withId(payload.id).delete();break;default:return}}}]),Sticky}(_reduxOrm.Model);Sticky.modelName="Sticky",Sticky.fields={name:(0,_reduxOrm.attr)(),x:(0,_reduxOrm.attr)(),y:(0,_reduxOrm.attr)(),content:(0,_reduxOrm.attr)()};var _default=Sticky;exports.default=_default},887:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(187)),_classCallCheck2=_interopRequireDefault(__webpack_require__(188)),_createClass2=_interopRequireDefault(__webpack_require__(189)),_possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(191)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(190)),_inherits2=_interopRequireDefault(__webpack_require__(192)),_reduxOrm=__webpack_require__(90),_uuid=__webpack_require__(102),_textToWidth=__webpack_require__(888),_actionTypes=__webpack_require__(138);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var Node=function(_Model){function Node(){return(0,_classCallCheck2.default)(this,Node),(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Node).apply(this,arguments))}return(0,_inherits2.default)(Node,_Model),(0,_createClass2.default)(Node,null,[{key:"reducer",value:function reducer(action,Node){var type=action.type,payload=action.payload;switch(type){case _actionTypes.CLEAR_DATABASE:Node.all().delete();break;case _actionTypes.ADD_NODE:var name=payload.name,_ports=payload.ports,width=(0,_textToWidth.nameToWidth)(name,_ports);Node.create({id:payload.id||(0,_uuid.v4)(),name:payload.name||"",x:payload.x||0,y:payload.y||0,colour:payload.colour||"#BBB",width:width});break;case _actionTypes.REMOVE_NODE:var node=Node.withId(payload.id),ports=node.ports;0!==ports.length&&(ports.forEach((function(port){0!==port.inputLinks.length&&port.inputLinks.forEach((function(link){return link.delete()})),0!==port.outputLinks.length&&port.outputLinks.forEach((function(link){return link.delete()}))})),ports.forEach((function(port){return port.delete()}))),node.delete();break;case _actionTypes.UPDATE_NODE:var _node=Node.withId(payload.nodeId),newValues=payload.newValues,_name=("name"in payload?payload:_node).name;_node.update(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},newValues,{width:(0,_textToWidth.nameToWidth)(_name,_node.ports&&_node.ports.toRefArray())}));break;default:return}}}]),Node}(_reduxOrm.Model);Node.modelName="Node",Node.fields={name:(0,_reduxOrm.attr)(),x:(0,_reduxOrm.attr)(),y:(0,_reduxOrm.attr)(),width:(0,_reduxOrm.attr)(),colour:(0,_reduxOrm.attr)()};var _default=Node;exports.default=_default},888:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nameToWidth=void 0;exports.nameToWidth=function nameToWidth(name,parameters){var nodeWidth=name&&13*name.length;if(!parameters||0===parameters.length)return nodeWidth;var parameterWidth=parameters&&10*parameters.reduce((function(max,parameter){return Math.max(max,parameter.name.length)}),0);return Math.max(nodeWidth,parameterWidth)}},889:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.svgElementToFile=void 0;var _saveFile=__webpack_require__(890),_pretty=_interopRequireDefault(__webpack_require__(901)),_saveSvgAsPng=__webpack_require__(909),svgXmlHeader='<?xml\nversion="1.0"\nencoding="iso-8859-1"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n';exports.svgElementToFile=function svgElementToFile(svg,format){var svgString=(0,_pretty.default)(svg.outerHTML).split("\n");switch(svgString[0]='<svg\nheight="100%"\nwidth="100%"\nxmlns="http://www.w3.org/2000/svg"\nxmlns:xlink="http://www.w3.org/1999/xlink">',format){case"SVG":(0,_saveFile.save)((0,_pretty.default)(svgXmlHeader+svgString.join("\n")),"canvas.svg");break;case"PNG":(0,_saveSvgAsPng.saveSvgAsPng)(svg,"canvas.png");break;default:(0,_saveFile.save)((0,_pretty.default)(svgXmlHeader+svgString.join("\n")),"canvas.svg")}}},910:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(18);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _reduxOrm=__webpack_require__(90),_models=_interopRequireDefault(__webpack_require__(408)),_default=(0,_reduxOrm.createReducer)(_models.default);exports.default=_default},911:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FORMAT_PNG=exports.FORMAT_SVG=void 0;exports.FORMAT_SVG="svg";exports.FORMAT_PNG="png"}},[[422,1,2]]]);
//# sourceMappingURL=main.425026989508665f7559.bundle.js.map